/* util.c -- misc utility functions
 *
 * Copyright (C) 2021 fgsfds, Andy Nguyen
 *
 * This software may be modified and distributed under the terms
 * of the MIT license.  See the LICENSE file for details.
 */

#include <psp2/io/dirent.h>
#include <psp2/io/fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>

#include "util.h"
#include "log.h"

//char fs_root[0x200] = "ux0:" "data/[...]";// DATA_PATH;

int debugPrintf(char* text, ...)
{
#ifdef DEBUG_LOG
    va_list     list;
    static char string[0x1000];

    va_start(list, text);
    vsnprintf(string, sizeof(string), text, list);
    va_end(list);

    SceUID fd = sceIoOpen(LOG_PATH, SCE_O_WRONLY | SCE_O_CREAT | SCE_O_APPEND, 0777);
    if (fd >= 0)
    {
        sceIoWrite(fd, string, strlen(string));
        sceIoClose(fd);
    }

    printf("%s", string);
#endif
    return 0;
}

int ret0(void)
{
    log_info("=====> ret0\n");
    return 0;
}

int ret1(void)
{
    return 1;
}

int retm1(void)
{
    return -1;
}